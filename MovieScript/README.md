# EchoGarden 動画作成ツール

BGMと背景画像を使用して動画を作成するGUIアプリケーションです。

## 機能

- **単曲動画**: 1つのBGMファイルと背景画像で動画を作成
- **耐久動画**: BGMをループして指定時間（15, 30, 45, 60分）の動画を作成
- **メドレー動画**: 複数の動画ファイルを連結してメドレー動画を作成
- **SNS用ショートバージョン**: 30秒程度の縦型動画を自動生成（Instagram Reels、TikTok、YouTube Shorts対応）
- **フェード効果**: 動画の開始と終了時にフェードイン・アウト効果を適用

## 必要な環境

### システム要件
- macOS 10.14以上
- Python 3.7以上
- FFmpeg

### FFmpegのインストール

#### macOS (Homebrew)
```bash
brew install ffmpeg
```

#### macOS (MacPorts)
```bash
sudo port install ffmpeg
```

#### 手動インストール
[FFmpeg公式サイト](https://ffmpeg.org/download.html)からダウンロードしてインストール

## セットアップ

1. リポジトリをクローンまたはダウンロード
2. MovieScriptフォルダに移動
3. アプリケーションを実行

```bash
cd MovieScript
./launch.sh
```

または

```bash
cd MovieScript
/usr/bin/python3 video_creator.py
```

## 使用方法

### 1. 動画タイトルの入力
- 「動画タイトル」セクションでタイトルを入力
- 入力したタイトルがファイル名に使用されます
- 特殊文字は自動的に除去されます

### 2. BGMファイルの選択
- 「BGM選択」セクションで「選択」ボタンをクリック
- 音声ファイル（MP3, WAV, M4A, FLAC, AAC）を選択

### 3. 背景画像・映像の選択
- 「背景画像・映像選択」セクションで「背景画像・映像を選択」ボタンをクリック
- 画像ファイル（JPG, PNG, GIF）または動画ファイル（MP4, MOV, AVI）を選択
- 複数選択可能（ランダムに使用されます）

### 4. 動画タイプの選択

#### 単曲
- 選択したBGMの長さに合わせて動画を作成
- 背景画像はランダムに選択され、ループ再生

#### 耐久動画
- 指定時間（15, 30, 45, 60分）の動画を作成
- BGMをループして目標時間に達するまで繰り返し
- 動画長の設定で時間を指定

#### メドレー
- 過去に作成した動画ファイルを複数選択
- 選択した動画を順番に連結してメドレー動画を作成
- 背景画像はランダムに選択

### 5. SNS用ショートバージョン設定
- 「ショートバージョンも作成」にチェックを入れると、SNS用の短い動画も同時作成
- 動画長は10〜60秒の間で設定可能（デフォルト30秒）
- 縦型（1080x1920）で出力され、Instagram Reels、TikTok、YouTube Shortsに最適化

### 6. 出力設定
- 「出力設定」セクションで出力フォルダを選択
- 作成された動画は指定フォルダに保存

### 7. 動画作成
- 「動画を作成」ボタンをクリック
- プログレスバーで進行状況を確認
- 完了すると通知が表示されます

## 出力ファイル

作成される動画ファイルは以下の命名規則に従います：

- **単曲**: `タイトル.mp4`
- **耐久動画**: `タイトル_XXmin.mp4`
- **メドレー**: `タイトル_melody.mp4`
- **SNS用ショートバージョン**: `タイトル_short_XXs.mp4`

※ タイトルが入力されていない場合は、従来の命名規則（single_video、loop_video等）が使用されます
※ 同じタイトルで複数回作成した場合、自動的に番号が付きます（例：雨の日のメロディ_1.mp4）

### ファイル名例
- 入力: `雨の日のメロディ`
- 出力: `雨の日のメロディ.mp4`
- 重複時: `雨の日のメロディ_1.mp4`

## 動画仕様

この画像を1920x1080 (Full HD)と1080x1920 (縦型)の２つのバージョンで作成して書き出して(拡張子はjpegで)

### 通常動画
- **解像度**: 1920x1080 (Full HD)
- **フォーマット**: MP4
- **ビデオコーデック**: H.264
- **オーディオコーデック**: AAC
- **フェード効果**: 開始3秒、終了3秒

### SNS用ショートバージョン
- **解像度**: 1080x1920 (縦型)
- **フォーマット**: MP4
- **ビデオコーデック**: H.264
- **オーディオコーデック**: AAC
- **フェード効果**: 開始1秒、終了1秒
- **最適化**: Instagram Reels、TikTok、YouTube Shorts対応

## トラブルシューティング

### FFmpegが見つからないエラー
```bash
# FFmpegがインストールされているか確認
ffmpeg -version

# パスが通っていない場合は、以下のパスを確認
/usr/local/bin/ffmpeg
/opt/homebrew/bin/ffmpeg
/usr/bin/ffmpeg
```

### 権限エラー
```bash
# 実行権限を付与
chmod +x video_creator.py
```

### メモリ不足エラー
- 大きなファイルを処理する際は、十分なメモリを確保してください
- 一時ファイルは自動的に削除されます

## 設定ファイル

アプリケーションは `config.json` ファイルに設定を保存します：
- 出力ディレクトリのパス

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## サポート

問題が発生した場合は、以下を確認してください：
1. FFmpegが正しくインストールされているか
2. 入力ファイルが正しい形式か
3. 出力ディレクトリに書き込み権限があるか 